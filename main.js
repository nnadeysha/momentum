(()=>{"use strict";const e=function(){function e(e,t,n,o,r){void 0===t&&(t="div"),void 0===n&&(n=""),void 0===o&&(o=""),void 0===r&&(r="");var i=document.createElement(t);i.className=n,i.textContent=o,i.id=r,e&&e.append(i),this.node=i}return e.prototype.destroy=function(){this.node.remove()},e}();var t,n,o=(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),r=function(t){function n(n){var o=t.call(this,n,"section","weather-wrapper")||this,r=new e(o.node,"div","weather-block");return o.weatherTemperature=new e(r.node,"span","weather-temperature"),o.weatherImg=new e(r.node,"i","weather-img owf"),o.weatherDescription=new e(o.node,"p","weather-description"),o.weatherWind=new e(o.node,"p","weather-wind"),o.weatherHumidity=new e(o.node,"p","weather-humidity"),o.cityInput=new e(o.node,"input","city-input"),o.cityInput.node.placeholder="Your city",o.cityInput.node.type="text",o.cityInput.node.maxLength=20,o.cityInput.node.textContent="",o.cityInput.node.oninput=function(){o.weatherTemperature?(o.getWeather(),o.setCityToLocalStorage()):alert("Error")},o}return o(n,t),n.prototype.setCityToLocalStorage=function(){localStorage.setItem("city",this.cityInput.node.value)},n.prototype.getCityToLocalStorage=function(){this.cityInput.node.value=localStorage.getItem("city")},n.prototype.getWeather=function(){return e=this,t=void 0,o=function(){var e,t,n;return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(o){switch(o.label){case 0:e="https://api.openweathermap.org/data/2.5/weather?q="+this.cityInput.node.value+"&lang=en&appid=acc15865bcf9f67a7111310944bdfafe&units=metric",o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch(e)];case 2:return[4,o.sent().json()];case 3:return t=o.sent(),this.weatherImg.node.classList.add("owf-"+t.weather[0].id),this.weatherTemperature.node.textContent=Math.floor(t.main.temp)+"Â°C",this.weatherDescription.node.textContent=t.weather[0].description,this.weatherWind.node.textContent=Math.floor(t.wind.speed)+" m/s - wind speed",this.weatherHumidity.node.textContent=Math.floor(t.main.humidity)+" % - humidity",console.log(t.weather[0].id,t.weather[0].description,t.main.temp,t.main.humidity),[3,5];case 4:return n=o.sent(),console.log("error"+n),[3,5];case 5:return[2]}}))},new((n=void 0)||(n=Promise))((function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((o=o.apply(e,t||[])).next())}));var e,t,n,o},n}(e),i=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function n(n){var o=t.call(this,n,"section","time-wrapper")||this;o.time=new e(o.node,"div","time"),o.date=new e(o.node,"div","date");var r=new e(o.node,"div","greeting-wrapper");return o.greeting=new e(r.node,"div","greeting"),o.inputName=new e(r.node,"input","input-name"),o.inputName.node.placeholder="Enter name",o.inputName.node.type="text",o.inputName.node.maxLength=20,o.inputName.node.oninput=function(){return o.setNameToLocalStorage()},o}return i(n,t),n.prototype.timeDateUpdate=function(){var e=new Date,t=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],n=(e.getFullYear(),e.getDate()+" "+t+", "+["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][e.getDay()-1]);this.date.node.textContent=n;var o=r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds());function r(e){return e<10?"0"+e:e}this.time.node.textContent=o,setInterval(this.timeDateUpdate.bind(this),1e3)},n.prototype.setNameToLocalStorage=function(){localStorage.setItem("name",this.inputName.node.value)},n.prototype.getNameToLocalStorage=function(){this.inputName.node.value=localStorage.getItem("name")},n.prototype.gritingUpdate=function(){var e=(new Date).getHours();this.greeting.node.textContent="Good "+["night","morning","afternoon","evening"][Math.floor(e/6)]},n}(e),s=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=["Aqua Caelestis","Ennio Morricone","River Flows In You","Summer Wind"],c=0,l=function(t){function n(n){var o=t.call(this,n,"section","player-wrapper")||this;o.playerTitle=new e(o.node,"div","player-title","Now playing"),o.currentSong=new e(o.node,"div","current-song","Aqua Caelestis"),o.audio=new e(o.node,"audio","audio"),o.audioSource=new e(o.audio.node,"source","audio-src"),o.audioSource.node.type="audio/mpeg",o.audioSource.node.src="",o.progressContainer=new e(o.node,"div","progress-container"),o.progress=new e(o.progressContainer.node,"input","progress"),o.progress.node.type="range",o.progress.node.max=""+o.audio.node.duration,o.progress.node.min="0",o.progress.node.step="1",o.progress.node.value="0",o.audioTimeDuration=new e(o.node,"p","audio-time-duration","00:00"),o.audioTime=new e(o.node,"p","audio-time");var r=new e(o.node,"div","player-control");return o.playerPrevBtn=new e(r.node,"button","player-prev-btn"),o.playerPlayBtn=new e(r.node,"button","player-play-btn play-pause-btn-backgraund"),o.playerNextBtn=new e(r.node,"button","player-next-btn"),o.playList=new e(o.node,"ul","play-list"),o.song1=new e(o.playList.node,"li","play-list-song song1","Aqua Caelestis"),o.song2=new e(o.playList.node,"li","play-list-song song2","Ennio Morricone"),o.song3=new e(o.playList.node,"li","play-list-song song3","River Flows In You"),o.song4=new e(o.playList.node,"li","play-list-song song4","Summer Wind"),o.loadSong(u[c]),o.playerPlayBtn.node.onclick=function(){o.playerPlayBtn.node.classList.contains("play")?o.pauseSong():(o.playSong(),o.updateProgress(),o.updateAudioTime())},o.audio.node.ontimeupdate=function(){o.updateProgress(),o.updateAudioTime()},o.playerNextBtn.node.onclick=function(){o.nextSong(),o.updateAudioTime(),o.updateProgress()},o.playerPrevBtn.node.onclick=function(){o.prevSong(),o.updateProgress(),o.updateAudioTime()},o.progress.node.oninput=function(){return o.handProgress()},o}return s(n,t),n.prototype.loadSong=function(e){this.currentSong.node.innerHTML=e,this.audio.node.src="./assets/audio/"+e+".mp3","Aqua Caelestis"==e&&(this.song4.node.classList.remove("active-song"),this.song2.node.classList.remove("active-song"),this.song1.node.classList.add("active-song")),"Ennio Morricone"==e&&(this.song1.node.classList.remove("active-song"),this.song3.node.classList.remove("active-song"),this.song4.node.classList.remove("active-song"),this.song2.node.classList.add("active-song")),"River Flows In You"==e&&(this.song1.node.classList.remove("active-song"),this.song2.node.classList.remove("active-song"),this.song4.node.classList.remove("active-song"),this.song3.node.classList.add("active-song")),"Summer Wind"==e&&(this.song1.node.classList.remove("active-song"),this.song3.node.classList.remove("active-song"),this.song2.node.classList.remove("active-song"),this.song4.node.classList.add("active-song"))},n.prototype.handProgress=function(){this.audio.node.currentTime=Number(this.progress.node.value)*this.audio.node.duration/100},n.prototype.playSong=function(){this.playerPlayBtn.node.classList.add("play"),this.audio.node.play(),this.updateProgress(),this.updateAudioTime()},n.prototype.pauseSong=function(){this.playerPlayBtn.node.classList.remove("play"),this.audio.node.pause()},n.prototype.nextSong=function(){++c>u.length-1&&(c=0),this.loadSong(u[c]),this.playSong()},n.prototype.prevSong=function(){--c<0&&(c=u.length-1),this.loadSong(u[c]),this.playSong()},n.prototype.updateProgress=function(){var e=this.audio.node.currentTime/this.audio.node.duration*100;this.progress.node.value=""+e,setInterval(this.updateProgress.bind(this),1e3)},n.prototype.updateAudioTime=function(){var e=r(Math.floor(this.audio.node.currentTime/60)),t=r(Math.floor(this.audio.node.currentTime%60)),n=r(Math.floor(this.audio.node.duration/60)),o=r(Math.floor(this.audio.node.duration%60));function r(e){return e<10?"0"+e:e}this.audioTime.node.innerHTML=e+" : "+t,this.audioTimeDuration.node.innerHTML=n+" : "+o,setInterval(this.updateAudioTime.bind(this),1e3)},n}(e),d=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((o=o.apply(e,t||[])).next())}))},g=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},h=function(t){function n(n){var o=t.call(this,n,"div","background")||this;return o.isLocked=!1,o.imgCache=new f,o.prevBtn=new e(o.node,"button","prev-button"),o.nextBtn=new e(o.node,"button","next-button"),o.nextBtn.node.onclick=function(){o.getSlide(o.randomNum+1)},o.prevBtn.node.onclick=function(){o.getSlide(o.randomNum-1)},o.randomNum=o.getRundomNumber(),o.timeOfDay=o.getTimeOfDay(),o.setBg(),o}return d(n,t),n.prototype.getRundomNumber=function(){return Math.floor(19*Math.random()+1)},n.prototype.setBg=function(){var e=this;return this.imgCache.getImage(this.getTimeOfDay(),this.getRundomNumber()).then((function(t){return e.node.style.backgroundImage="url("+URL.createObjectURL(t)+")",null}))},n.prototype.getSlide=function(e){return p(this,void 0,void 0,(function(){return g(this,(function(t){switch(t.label){case 0:return console.log(this.isLocked),this.isLocked?[2]:(this.randomNum=e>20?1:e<1?20:e,[4,Promise.all([this.setBg(),this.delay(1e3)])]);case 1:return t.sent(),this.isLocked=!1,[2]}}))}))},n.prototype.delay=function(e){return new Promise((function(t){setTimeout((function(){return t(null)}),e)}))},n.prototype.update=function(){return p(this,void 0,void 0,(function(){var e,t,n;return g(this,(function(o){switch(o.label){case 0:e="https://api.unsplash.com/photos/random?orientation=landscape&query=nature&client_id=w31RDyFST2zqqLMiwCr2dzkpaQW0cUKu1HF0V86oMsY",o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch(e)];case 2:return[4,o.sent().json()];case 3:return t=o.sent(),this.node.style.backgroundImage="url("+t.urls.regular+")",[3,5];case 4:return n=o.sent(),console.log("error"+n),[3,5];case 5:return[2]}}))}))},n.prototype.getTimeOfDay=function(){var e=(new Date).getHours();return["night","morning","afternoon","evening"][Math.floor(e/6)]},n}(e),f=function(){function e(){this.cache=new Map}return e.prototype.getUrl=function(e,t){return"https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/"+e+"/"+(t<10?"0"+t.toString():t.toString())+".jpg"},e.prototype.loadImage=function(e){var t=this;return fetch(e).then((function(e){return e.blob()})).then((function(n){return t.cache.set(e,n),n}))},e.prototype.getImage=function(e,t){var n=this.getUrl(e,t);return this.cache.has(n)?Promise.resolve(this.cache.get(n)):this.loadImage(n)},e}(),y=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=function(t){function n(n){var o=t.call(this,n,"div","setting-wrapper")||this;return o.settingMenuBtn=new e(o.node,"button","setting-menu-button"),o.settingMenu=new e(o.node,"div","setting-menu"),o.settingLanguage=new e(o.settingMenu.node,"div","setting-language"),o.settingLanguageRussian=new e(o.settingLanguage.node,"div","russian-block"),o.settingLanguageBtnRu=new e(o.settingLanguageRussian.node,"input","setting-language-ru","setting-language-ru"),o.settingLanguageBtnRu.node.name="language",o.settingLanguageBtnRu.node.type="radio",o.ruLabel=new e(o.settingLanguageRussian.node,"label","lang-label","RU"),o.ruLabel.node.htmlFor="setting-language-ru",o.settingLanguageEnglish=new e(o.settingLanguage.node,"div","english-block"),o.settingLanguageBtnEn=new e(o.settingLanguageEnglish.node,"input","setting-language-en"),o.settingLanguageBtnEn.node.name="language",o.settingLanguageBtnEn.node.type="radio",o.ruLabel=new e(o.settingLanguageEnglish.node,"label","lang-label","EN"),o.ruLabel.node.htmlFor="setting-language-en",o.settingBackground=new e(o.settingMenu.node,"div","setting-background"),o.settingBackgroundGitHub=new e(o.settingBackground.node,"input","setting-background","","background-github"),o.settingBackgroundGitHub.node.type="checkbox",o.settingBackgroundGitHubLabel=new e(o.settingBackgroundGitHub.node,"label","GIT HUB"),o.settingBackgroundGitHubLabel.node.htmlFor="background-github",o}return y(n,t),n}(e),w=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=function(t){function n(n){var o=t.call(this,n)||this;o.randomBackgraund=new h(n);var i=new e(o.randomBackgraund.node,"header","header");o.weather=new r(i.node),o.player=new l(i.node);var s=new e(o.randomBackgraund.node,"main","main");o.timeAndDate=new a(s.node);var u=new e(o.randomBackgraund.node,"footer","footer");return o.settings=new m(u.node),o.randomBackgraund.update(),o.weather.getCityToLocalStorage(),o.weather.getWeather(),o.timeAndDate.timeDateUpdate(),o.timeAndDate.gritingUpdate(),o.timeAndDate.getNameToLocalStorage(),o}return w(n,t),n}(e);w((function(e){return n.call(this,e)||this}),n=e),new v(document.querySelector(".momentum"))})();